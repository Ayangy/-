# 湖北智库网接口文档

## 1、基础功能分配

### 1.1、用户管理

#### 1.1.1、新增用户

服务地址：/sys/user/add

请求方法：POST

请求body：

``` json
{
    "username": "小明",
  	"password": "123",
  	"roleId": 1
  	
}
```

请求成功：

```json
{
    "message": "添加成功",
    "status": 0,
    "result": {
        "id": 5,
        "username": "小明",
        "password": "123",
        "roleId": 1,
        "createTime": "2017-11-02 15:57:10"
    },
    "returnCode": null
}
```

#### 1.1.2、删除用户

服务地址：/sys/user/delete

请求方法：DELETE

请求参数：

| 参数   | 类型   | 是否必须 | 默认值  | 说明   |
| ---- | ---- | ---- | ---- | ---- |
| id   | int  | yes  |      | 用户ID |
|      |      |      |      |      |

请求成功：

```json
{
    "message": "删除成功",
    "status": 0,
    "result": {
        "id": 5,
        "username": "小明",
        "password": "123",
        "roleId": 1,
        "createTime": "2017-11-02 15:57:10"
    },
    "returnCode": null
```

请求失败：

```json
{
    "message": "该用户不存在，删除失败",
    "status": -1,
    "result": null,
    "returnCode": null
}
```

#### 1.1.3、修改用户

服务地址：/sys/user/update

请求方法：PUT

请求body：

```json
{	
	"id": 4,
    "username": "小李",
    "password": "123",
    "roleId": 1
}
```

请求成功：

```json
{
    "message": "修改成功",
    "status": 0,
    "result": {
        "id": 4,
        "username": "小李",
        "password": "123",
        "roleId": 1,
        "createTime": null
    },
    "returnCode": null
}
```

修改失败：

```json
{
    "message": "修改失败，用户不存在",
    "status": -1,
    "result": null,
    "returnCode": null
}
```

#### 1.1.4、查询所有用户

服务地址：/sys/user/findAll

请求方法：GET

请求参数：

| 参数        | 类型     | 是否必须 | 默认值  | 说明   |
| --------- | ------ | ---- | ---- | ---- |
| index     | int    | 否    | 1    | 第几页  |
| size      | int    | 否    | 10   | 每页几条 |
| field     | String | 否    | ""   | 字段名  |
| keyword   | string | 否    | ""   | 字段值  |
| beginTime | date   | 否    | ""   | 开始时间 |
| endTime   | date   | 否    | ""   | 结束时间 |

请求成功：

```json
{
    "message": null,
    "status": 0,
    "result": {
        "content": [
            {
                "id": 1,
                "username": "小李",
                "password": "456",
                "roleId": 0,
                "createTime": null
            },
            {
                "id": 2,
                "username": "张三",
                "password": "789",
                "roleId": 0,
                "createTime": null
            },
            {
                "id": 3,
                "username": "小明",
                "password": "123",
                "roleId": 0,
                "createTime": null
            }
        ],
        "last": true,
        "totalElements": 7,
        "totalPages": 1,
        "number": 0,
        "size": 10,
        "sort": null,
        "first": true,
        "numberOfElements": 7
    },
    "returnCode": null
}
```

请求失败

```json
{
    "message": "查询用户列表失败",
    "status": -1,
    "result": null,
    "returnCode": null
}
```

1.1.5、给用户指定角色

服务地址：/sys/user/updateAuthedUserRole

请求方法：POST

请求参数：

| 参数     | 类型   | 是否必须 | 默认值  | 说明   |
| ------ | ---- | ---- | ---- | ---- |
| userId | int  | 是    |      | 用户Id |
| roleId | int  | 是    |      | 角色Id |

请求成功：

```json
{
    "message": "修改成功",
    "status": 0,
    "result": {
        "id": 1,
        "userId": 1,
        "roleId": 1
    },
    "returnCode": null
}
```

### 1.2、角色管理

#### 1.2.1、新增角色

服务地址：/sys/role/add

请求方法：POST

请求body：

```json
{	
    "name": "编辑部经理",
    "note": "角色备注"
}
```

请求成功：

```json
{
    "message": "添加成功",
    "status": 0,
    "result": {
        "id": 3,
        "name": "编辑部经理",
        "note": "角色备注"
    },
    "returnCode": null
}
```

请求失败：

```json
{
    "message": "新增角色失败",
    "status": -1,
    "result": null,
    "returnCode": null
}
```

#### 1.2.2、删除角色

服务地址：/sys/role/delete

请求方法：DELETE

请求参数：

| 参数   | 类型   | 是否必须 | 默认值  | 说明   |
| ---- | ---- | ---- | ---- | ---- |
| id   | int  | 是    |      | 角色Id |

请求成功：

```json
{
    "message": "删除成功",
    "status": 0,
    "result": {
        "id": 3,
        "name": "编辑部经理",
        "note": "角色备注"
    },
    "returnCode": null
}
```

请求失败：

```json
{
    "message": "删除角色失败",
    "status": -1,
    "result": null,
    "returnCode": null
}
```

#### 1.2.3、修改角色

服务地址：/sys/role/update

请求方法：PUT

请求body：

```json
{	
	"id": 1,
	"name": "编辑部经理",
	"note": "角色备注"
}
```

请求成功：

```json
{
    "message": "修改成功",
    "status": 0,
    "result": {
        "id": 1,
        "name": "编辑部经理",
        "note": "角色备注"
    },
    "returnCode": null
}
```

请求失败：

```json
{
    "message": "修改失败，角色不存在",
    "status": -1,
    "result": null,
    "returnCode": null
}
```

#### 1.2.4、查询所有角色

服务地址：/sys/role/getAll

请求方法：GET

请求成功：

```json
{
    "message": "列表获取成功",
    "status": 0,
    "result": [
        {
            "id": 1,
            "name": "编辑部经理",
            "note": "角色备注"
        },
        {
            "id": 2,
            "name": "编辑部经理",
            "note": "备注"
        }
    ],
    "returnCode": null
}
```

请求失败：

```json
{
    "message": "获取角色列表异常",
    "status": -1,
    "result": null,
    "returnCode": null
}
```

#### 1.2.5、条件查询角色列表

服务地址：/sys/role/findAll

请求方法：GET

请求参数：

| 参数        | 类型     | 是否必须 | 默认值  | 说明   |
| --------- | ------ | ---- | ---- | ---- |
| index     | int    | 否    | 0    | 第几页  |
| size      | int    | 否    | 10   | 每页   |
| field     | string | 否    | ""   | 查询字段 |
| keyword   | string | 否    | ""   | 查询值  |
| beginTime | date   | 否    | ""   | 开始时间 |
| endTime   | date   | 否    | ""   | 结束时间 |

请求成功：

```json
{
    "message": "查询角色成功",
    "status": 0,
    "result": [
        {
            "id": 1,
            "name": "编辑部经理",
            "note": "角色备注"
        },
        {
            "id": 2,
            "name": "编辑部经理",
            "note": "备注"
        }
    ],
    "returnCode": null
}
```

请求失败：

```json
{
    "message": "获取角色列表异常",
    "status": -1,
    "result": null,
    "returnCode": null
}
```

### 1.3、机构管理

#### 1.3.1、新增机构

服务地址：/organization/add

请求方法：POST

请求body：

```json
{	
	"name": "机构名",
	"note": "机构备注"
}
```

请求成功：

```json
{
    "message": "添加成功",
    "status": 0,
    "result": {
        "id": 1,
        "name": "机构名",
        "note": "机构备注"
    },
    "returnCode": null
}
```

请求失败：

```json
{
    "message": "新增机构失败",
    "status": -1,
    "result": null,
    "returnCode": null
}
```

#### 1.3.2、删除机构

服务地址：/organization/delete

请求方法：DELETE

请求参数：

| 参数   | 类型   | 是否必须 | 默认值  | 说明   |
| ---- | ---- | ---- | ---- | ---- |
| id   | int  | 是    |      | 机构Id |

请求成功：

```json
{
    "message": "删除成功",
    "status": 0,
    "result": {
        "id": 2,
        "name": "机构",
        "note": "机构备注"
    },
    "returnCode": null
}
```

请求失败：

```json
{
    "message": "新增删除失败",
    "status": -1,
    "result": null,
    "returnCode": null
}
```

#### 1.3.3、修改机构

服务地址：/organization/update

请求方法：PUT

请求body：

```json
{	
	"id": 1,
	"name": "机构名",
	"note": "机构备注"
}
```

请求成功：

```json
{
    "message": "修改机构成功",
    "status": 0,
    "result": {
        "id": 1,
        "name": "机构名",
        "note": "机构备注"
    },
    "returnCode": null
}
```

请求失败：

```json
{
    "message": "修改机构失败",
    "status": -1,
    "result": null,
    "returnCode": null
}
```

#### 1.3.4、查询所有机构

服务地址：/organization/getAll

请求方法：GET

请求成功：

```json
{
    "message": "获取列表成功",
    "status": 0,
    "result": [
        {
            "id": 1,
            "name": "机构名",
            "note": "机构备注"
        }
    ],
    "returnCode": null
}
```

请求失败：

```json
{
    "message": "获取机构列表失败",
    "status": -1,
    "result": null,
    "returnCode": null
}
```

#### 1.3.5、条件查询机构列表

服务地址：/organization/findAll

请求方法：GET

请求参数：

| 参数      | 类型     | 是否必须 | 默认值  | 说明   |
| ------- | ------ | ---- | ---- | ---- |
| index   | int    | 否    | 0    | 第几页  |
| size    | int    | 否    | 10   | 每页几个 |
| field   | string | 否    | ""   | 查询字段 |
| keyword | string | 否    | ""   | 查询值  |

请求成功：

```json
{
    "message": "获取列表成功",
    "status": 0,
    "result": [
        {
            "id": 1,
            "name": "机构名",
            "note": "机构备注"
        }
    ],
    "returnCode": null
}
```

请求失败：

```json
{
    "message": "获取机构列表失败",
    "status": -1,
    "result": null,
    "returnCode": null
}
```

### 1.4、菜单管理

#### 1.4.1、获取菜单

服务地址：/sys/menu/findAll

请求方法：GET

请求成功：

```json
{
    "message": "菜单加载成功",
    "status": 0,
    "result": [
        {
            "id": 1,
            "name": "用户管理",
            "code": null,
            "menuId": -1,
            "list": []
        },
        {
            "id": 2,
            "name": "权限管理",
            "code": null,
            "menuId": -1,
            "list": []
        },
        {
            "id": 3,
            "name": "信息管理",
            "code": null,
            "menuId": -1,
            "list": [
                {
                    "id": 4,
                    "name": "智库新闻",
                    "code": null,
                    "menuId": 3,
                    "list": []
                },
                {
                    "id": 5,
                    "name": "决策热点管理",
                    "code": null,
                    "menuId": 3,
                    "list": []
                }
            ]
        }
    ],
    "returnCode": null
}
```

请求失败：

```
{
    "message": "菜单加载异常",
    "status": -1,
    "result": null,
    "returnCode": null
}
```

#### 1.4.2、编辑角色菜单

服务地址：/sys/menu/editRoleRight

请求方法：POST

请求参数：

| 参数     | 类型   | 是否必须 | 默认值  | 说明   |
| ------ | ---- | ---- | ---- | ---- |
| roleId | int  | 是    |      | 角色id |

请求body：

```json
[
  1,
  2
]
```

请求成功：

```json
{
    "message": "角色菜单设置成功",
    "status": 0,
    "result": true,
    "returnCode": null
}
```

请求失败：

```json
{
    "message": "编辑角色菜单异常",
    "status": -1,
    "result": null,
    "returnCode": null
}
```

